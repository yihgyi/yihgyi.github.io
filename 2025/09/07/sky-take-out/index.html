<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>外卖 | yihgyi's Blog</title><meta name="author" content="tzxld"><meta name="copyright" content="tzxld"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="外卖开发介绍:开发流程 需求分析:需求规格说明书,产品原型(静态网页) 设计: UI设计(界面效果,人机交互逻辑) 数据库设计 接口设计(请求,响应规范) 编码: 项目代码,单元测试 测试:测试用例,测试报告 上线运维:软件环境安装,配置  角色分工:  软件环境开发环境:开发人员开发阶段使用环境,一般外部人员无法访问 测试环境:测试人员使用的环境,测试项目,一般外部人员无法访问 生产环境:线上环"><meta property="og:type" content="article"><meta property="og:title" content="外卖"><meta property="og:url" content="https://yihgyi.github.io/2025/09/07/sky-take-out/index.html"><meta property="og:site_name" content="yihgyi&#39;s Blog"><meta property="og:description" content="外卖开发介绍:开发流程 需求分析:需求规格说明书,产品原型(静态网页) 设计: UI设计(界面效果,人机交互逻辑) 数据库设计 接口设计(请求,响应规范) 编码: 项目代码,单元测试 测试:测试用例,测试报告 上线运维:软件环境安装,配置  角色分工:  软件环境开发环境:开发人员开发阶段使用环境,一般外部人员无法访问 测试环境:测试人员使用的环境,测试项目,一般外部人员无法访问 生产环境:线上环"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.acwing.com/media/user/profile/photo/231226_lg_3803254d73.jpg"><meta property="article:published_time" content="2025-09-07T13:05:42.000Z"><meta property="article:modified_time" content="2025-09-07T13:12:26.879Z"><meta property="article:author" content="tzxld"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.acwing.com/media/user/profile/photo/231226_lg_3803254d73.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://yihgyi.github.io/2025/09/07/sky-take-out/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"外卖",isPost:!0,isHome:!1,isHighlightShrink:void 0,isToc:!0,postUpdate:"2025-09-07 21:12:26"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.acwing.com/media/user/profile/photo/231226_lg_3803254d73.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="yihgyi's Blog"><span class="site-name">yihgyi's Blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">外卖</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-07T13:05:42.000Z" title="发表于 2025-09-07 21:05:42">2025-09-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-07T13:12:26.879Z" title="更新于 2025-09-07 21:12:26">2025-09-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>16分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="外卖"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="外卖"><a href="#外卖" class="headerlink" title="外卖"></a>外卖</h1><h2 id="开发介绍"><a href="#开发介绍" class="headerlink" title="开发介绍:"></a>开发介绍:</h2><h3 id="开发流程"><a href="#开发流程" class="headerlink" title="开发流程"></a>开发流程</h3><ul><li><strong>需求分析</strong>:需求规格说明书,产品原型(静态网页)</li><li><strong>设计</strong>: UI设计(界面效果,人机交互逻辑) 数据库设计 接口设计(请求,响应规范)</li><li><strong>编码</strong>: 项目代码,单元测试</li><li><strong>测试</strong>:测试用例,测试报告</li><li><strong>上线运维</strong>:软件环境安装,配置</li></ul><p>角色分工:</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250820105704327.png" alt="image-20250820105704327"></p><h3 id="软件环境"><a href="#软件环境" class="headerlink" title="软件环境"></a>软件环境</h3><p><strong>开发环境</strong>:开发人员开发阶段使用环境,一般外部人员无法访问</p><p><strong>测试环境</strong>:测试人员使用的环境,测试项目,一般外部人员无法访问</p><p><strong>生产环境</strong>:线上环境,	正式对外提供服务的环境(项目正式上线)</p><h2 id="项目整体"><a href="#项目整体" class="headerlink" title="项目整体:"></a>项目整体:</h2><p><strong>项目功能架构</strong>:(项目业务模功能模块)</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250820111123129.png" alt="image-20250820111123129">&#96;</p><p><strong>产品原型</strong></p><p><strong>技术选型</strong>:项目的技术框架和中间件</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250820111239493.png" alt="image-20250820111239493"></p><p>项目结构介绍:</p><h3 id="使用分模块开发"><a href="#使用分模块开发" class="headerlink" title="使用分模块开发"></a>使用分模块开发</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250820123012750.png" alt="image-20250820123012750"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250820122721988.png" alt="image-20250820122721988"></p><h2 id="准备阶段"><a href="#准备阶段" class="headerlink" title="准备阶段:"></a>准备阶段:</h2><h3 id="登录模块"><a href="#登录模块" class="headerlink" title="登录模块"></a>登录模块</h3><p>修改配置文件中数据库配置</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821152138400.png" alt="image-20250821152138400"></p><p>使用阿里的德鲁伊连接池</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821152418314.png" alt="image-20250821152418314"></p><p>从配置文件中取值</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821152712816.png" alt="image-20250821152712816"></p><p>这段YAML配置代码用于设置Spring Boot应用的激活配置文件。spring.profiles.active: dev表示当前激活名为dev的配置文件，通常对应开发环境的配置。</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821152739749.png" alt="image-20250821152739749"></p><p>mybatis中的mapper.xml文件映射</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821152836267.png" alt="image-20250821152836267"></p><p>因为不是同包所以配置</p><p>全局异常捕获 (运行时异常)</p><p>将checkedException转为RuntimeException抛出</p><p>前者需要显示处理后者不需要,最后交给全局异常处理器捕获</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821155013346.png" alt="image-20250821155013346"></p><h3 id="建造者模式-Builder"><a href="#建造者模式-Builder" class="headerlink" title="建造者模式@Builder"></a>建造者模式@Builder</h3><p>@Builder 建造者设计模式 用lombok的@Builder注解</p><p>在实体类加上@Builder注解</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821155547628.png" alt="image-20250821155547628"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">手动实现版:</span><br><span class="line">public class User &#123;</span><br><span class="line">    private final String name;</span><br><span class="line">    private final int age;</span><br><span class="line">    private final String email;</span><br><span class="line"></span><br><span class="line">    private User(UserBuilder builder) &#123;</span><br><span class="line">        this.name = builder.name;</span><br><span class="line">        this.age = builder.age;</span><br><span class="line">        this.email = builder.email;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static class UserBuilder &#123;</span><br><span class="line">        private String name;</span><br><span class="line">        private int age;</span><br><span class="line">        private String email;</span><br><span class="line"></span><br><span class="line">        public UserBuilder name(String name) &#123;</span><br><span class="line">            this.name = name;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public UserBuilder age(int age) &#123;</span><br><span class="line">            this.age = age;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public UserBuilder email(String email) &#123;</span><br><span class="line">            this.email = email;</span><br><span class="line">            return this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public User build() &#123;</span><br><span class="line">            return new User(this);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">	</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821155650527.png" alt="image-20250821155650527"></p><p>外卖中用builder快速构造一个vo对象(视图对象)</p><p>密码校验方式:(根据用户名查询 然后来处理不同异常情况)</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821155801399.png" alt="image-20250821155801399"></p><p>令牌校验,用拦截器</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821160112427.png" alt="image-20250821160112427"></p><p>实现目标资源方法执行前的处理</p><p>定义了很多常量类</p><p>例如</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821160451713.png" alt="image-20250821160451713"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821160400449.png" alt="image-20250821160400449"></p><h3 id="Nginx代理服务器"><a href="#Nginx代理服务器" class="headerlink" title="Nginx代理服务器"></a>Nginx代理服务器</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821161043194.png" alt="image-20250821161043194"></p><p>请求过的资源会做缓存,下一次就不用重复请求服务器了</p><p>集群部署会根据服务器压力来分配请求</p><p>走nginx入口再决定走内网转发到后端服务</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821161454839.png" alt="image-20250821161454839"></p><p>匹配&#x2F;api&#x2F;的部分</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821161520153.png" alt="image-20250821161520153"></p><p>配置负载均衡</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821161557307.png" alt="image-20250821161557307"></p><h3 id="负载均衡策略"><a href="#负载均衡策略" class="headerlink" title="负载均衡策略"></a>负载均衡策略</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821161731344.png" alt="image-20250821161731344"></p><hr><p>🔁 <strong>1. 轮询（Round Robin）</strong></p><ul><li><strong>就是你一次我一次</strong>：比如有3台服务器，第1个请求给服务器A，第2个给B，第3个给C，第4个又循环给A。</li><li><strong>适合场景</strong>：所有服务器性能差不多，且请求均匀。这是<strong>默认策略</strong>，但并非真正的“平均分配”，如果请求处理时间差异大，仍可能出现负载不均。</li></ul><hr><p>⚖️ <strong>2. 权重（Weight）</strong></p><ul><li><strong>给你设置重要程度</strong>：比如服务器A权重&#x3D;3，B权重&#x3D;1，那么每4个请求中，A处理3个，B处理1个。</li><li><strong>适用场景</strong>：服务器性能不一致（性能高的权重高）。</li></ul><hr><p>🌐 <strong>3. IP哈希（ip_hash）</strong></p><ul><li><strong>根据客户端IP映射一台服务器</strong>：对客户端IP计算哈希值，然后根据哈希值决定分给哪台服务器。<strong>同一个IP的请求永远固定访问同一台服务器</strong>（除非服务器宕机）。</li><li><strong>适用场景</strong>：需要会话保持（Session保持），比如用户登录后，后续操作都要到同一台服务器。</li></ul><hr><p>📉 <strong>4. 最少连接（least_conn）</strong></p><ul><li><strong>请求少，就给你分配点请求</strong>：Nginx会实时检查后端服务器的当前连接数，把新请求分配给当前连接数最少的服务器。（不是请求数，而是TCP连接数）</li><li><strong>适用场景</strong>：避免某台服务器过载，实现负载均衡。</li></ul><hr><p>🔗 <strong>5. URL哈希（url_hash）</strong></p><ul><li><strong>和IP哈希类似，但按URL分配</strong>：对请求的URL计算哈希值，<strong>相同URL的请求永远分配到同一台服务器</strong>。</li><li><strong>适用场景</strong>：利用缓存（比如同一张图片总在同一台服务器，缓存命中率高）。</li></ul><hr><p>⏱️ <strong>6. 公平（fair）</strong></p><ul><li><strong>哪个服务器处理时间短就多给点请求</strong>：Nginx会动态检查后端服务器的响应时间，优先把请求分配给响应快的服务器。</li><li><strong>适用场景</strong>：服务器性能差异大，且希望响应快的服务器多处理请求。</li></ul><hr><p>✅ 总结对比：</p><table><thead><tr><th>策略</th><th>原理概括</th><th>应用场景</th></tr></thead><tbody><tr><td>轮询</td><td>你一次我一次</td><td>服务器性能相近</td></tr><tr><td>权重</td><td>谁权重高谁多干活</td><td>服务器性能不同</td></tr><tr><td>IP哈希</td><td>同一个IP永远找同一台服务器</td><td>需要会话保持（如登录状态）</td></tr><tr><td>最少连接</td><td>谁闲谁干活</td><td>避免服务器过载</td></tr><tr><td>URL哈希</td><td>同一个URL永远找同一台服务器</td><td>提高缓存命中率（如图片、静态资源）</td></tr><tr><td>公平</td><td>谁快谁多干活</td><td>服务器响应速度差异大</td></tr></tbody></table><hr><h3 id="完善登录验证"><a href="#完善登录验证" class="headerlink" title="完善登录验证"></a>完善登录验证</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821164725124.png" alt="image-20250821164725124"></p><p>使用&#x2F;&#x2F;TODO注释可以标记代码文件位置 待办</p><p>使用md5加密方式来加密密码 单向(密码-&gt;字符串)</p><p>数据库密码就存储这个字符串</p><p>要对比两个密码是否一样只能通过都加密然后对比字符串是否一样</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821165019760.png" alt="image-20250821165019760"></p><p>asHex 16进制</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821165349527.png" alt="image-20250821165349527"></p><p>如<code>123456</code>经过md5算法加密以后变成了<code>e10adc3949ba59abbe56e057f20f883e</code></p><p><code>yapi</code> 接口在线管理平台</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821192556763.png" alt="image-20250821192556763"></p><p>但是推荐<code>Apifox</code>新建 导入<code>YaPi</code>拖拽<code>json</code>上传</p><h3 id="Swagger"><a href="#Swagger" class="headerlink" title="Swagger"></a>Swagger</h3><p>生成后端测试接口</p><p>加入增强版 knife4j</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821194514360.png" alt="image-20250821194514360"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821195620313.png" alt="image-20250821195620313"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821200121047.png" alt="image-20250821200121047"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821200743992.png" alt="image-20250821200743992"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821201122816.png" alt="image-20250821201122816"></p><p>Knife4j的文档界面（<code>doc.html</code>）需要一些前端资源文件</p><p>这些文件都打包在Knife4j的jar包中，我们需要告诉Spring：”当有人访问 <code>doc.html</code> 时，请去jar包里的指定位置找这些文件</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821201407530.png" alt="image-20250821201407530"></p><h3 id="Swagger常用注解"><a href="#Swagger常用注解" class="headerlink" title="Swagger常用注解"></a>Swagger常用注解</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821202202603.png" alt="image-20250821202202603"></p><p>这样生成的接口文档就有说明,可读性更高</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821202347482.png" alt="image-20250821202347482"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821202352648.png" alt="image-20250821202352648"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821202417453.png" alt="image-20250821202417453"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821202439413.png" alt="image-20250821202439413"></p><h2 id="项目开发-重点新学部分"><a href="#项目开发-重点新学部分" class="headerlink" title="项目开发(重点新学部分)"></a>项目开发(重点新学部分)</h2><h3 id="新增员工"><a href="#新增员工" class="headerlink" title="新增员工"></a>新增员工</h3><p>进入管理界面以后,可以对员工进行管理</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821210103037.png" alt="image-20250821210103037"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821210307860.png" alt="image-20250821210307860"></p><p>根据产品原型设计接口文档和数据库</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250821210430812.png" alt="image-20250821210430812"></p><h4 id="对象属性复制"><a href="#对象属性复制" class="headerlink" title="对象属性复制"></a>对象属性复制</h4><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822091936975.png" alt="image-20250822091936975"></p><p>用<code>employeeDTO</code>封装传输数据</p><p>存在问题:</p><ul><li><p>username唯一,会抛出<code>sql</code>异常</p><p>解决方案: 创建一个全局异常处理器捕获,得到duplicate (运行时异常)</p></li><li><p>存<code>userid</code></p><p>解决方案: <code>ThreadLocal</code>线程局部变量,线程隔离</p></li></ul><p>一次请求响应对应同一个线程</p><p>threadLocal是key 在map里面</p><h4 id="测试接口"><a href="#测试接口" class="headerlink" title="测试接口"></a>测试接口</h4><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822104634889.png" alt="image-20250822104634889"></p><p>可以手动添加令牌token到参数,这样用测试工具就可以携带令牌了</p><h3 id="员工分页展示-查询"><a href="#员工分页展示-查询" class="headerlink" title="员工分页展示(查询)"></a>员工分页展示(查询)</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822104743468.png" alt="image-20250822104743468"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822110253025.png" alt="image-20250822110253025"></p><p><code>PageHelper</code>基于<code>mybatis</code>的拦截器实现</p><p><code>PageHelper</code> 的底层靠拦截器<code>startpage</code>把<code>page</code>和<code>pageSize</code>放到<code>ThreadLocal</code>里面</p><h4 id="对于返回日期数据格式问题解决方案"><a href="#对于返回日期数据格式问题解决方案" class="headerlink" title="对于返回日期数据格式问题解决方案"></a>对于返回日期数据格式问题解决方案</h4><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822134220376.png" alt="image-20250822134220376"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822134329801.png" alt="image-20250822134329801"></p><h3 id="账号启用禁用状态"><a href="#账号启用禁用状态" class="headerlink" title="账号启用禁用状态"></a>账号启用禁用状态</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822134433482.png" alt="image-20250822134433482"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822134441808.png" alt="image-20250822134441808"></p><p>点击启用 状态从禁用-&gt;启用 启用按钮-&gt;禁用按钮</p><p>反之同理</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822134523937.png" alt="image-20250822134523937"></p><p>完全不用担心，这两行是MyBatis框架在Spring Boot项目中最经典的配置项。它们就像是给MyBatis这个“大厨”下的两道指令，告诉它“食材（SQL文件）”在哪，以及“菜名（实体类别名）”怎么简化。</p><p>我来给你用最通俗易懂的方式解释一下：</p><hr><ol><li><code>mapper-locations: classpath:mapper/*.xml</code></li></ol><p><strong>作用：</strong> <strong>告诉MyBatis，你写的SQL映射文件（Mapper XML文件）放在哪个目录下。</strong></p><ul><li><code>classpath:</code>：这是一个关键字，指的是你项目编译后的 <code>target/classes</code> 目录。通常，我们把资源文件放在项目的 <code>src/main/resources</code> 目录下，因为它们最终都会被复制到 <code>classpath</code> 下。</li><li><code>mapper/*.xml</code>：这是一个通配符路径。<code>mapper/</code> 表示在 <code>resources</code> 目录下有一个叫 <code>mapper</code> 的文件夹。<code>*.xml</code> 表示会加载这个文件夹下的<strong>所有</strong>以 <code>.xml</code> 结尾的文件。</li></ul><p><strong>举个例子：</strong><br>你的项目结构可能是这样的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">└── main/</span><br><span class="line">    ├── java/</span><br><span class="line">    │   └── com/example/YourApp.java</span><br><span class="line">    └── resources/</span><br><span class="line">        ├── application.yml       # 配置文件</span><br><span class="line">        └── mapper/               # 你配置的目录</span><br><span class="line">            ├── UserMapper.xml    # 用户相关的SQL</span><br><span class="line">            ├── OrderMapper.xml   # 订单相关的SQL</span><br><span class="line">            └── ProductMapper.xml # 商品相关的SQL</span><br></pre></td></tr></table></figure><p><strong>如果没有这个配置</strong>，MyBatis就不知道去哪里找这些 <code>.xml</code> 文件，你的SQL语句就无法被加载，程序就会报错。</p><p><strong>简单说：这条配置就是“SQL文件地址导航”。</strong></p><hr><ol start="2"><li><code>type-aliases-package: com.sky.entity</code></li></ol><p><strong>作用：</strong> <strong>为你的实体类设置一个简称（别名），这样在Mapper XML文件里就不用写全限定类名了。</strong></p><ul><li><code>com.sky.entity</code>：这是你的实体类（Entity）所在的包路径。MyBatis会自动扫描这个包下的所有Java类。</li></ul><p><strong>有什么好处？</strong><br>假设你有一个实体类，它的全限定名是：<code>com.sky.entity.User</code></p><p><strong>没有配置别名时</strong>，你在Mapper XML中必须写全名，非常冗长：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.entity.User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM user WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>配置了别名之后</strong>，MyBatis会默认使用<strong>类名</strong>（首字母大小写都行）作为别名(<strong>更准确的描述是：<code>type-aliases-package</code> 配置的作用是【开启自动别名扫描】，然后MyBatis会【自动地】为指定包下的所有类【注册一个别名】。</strong>)。所以你可以简写成：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM user WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>或者，如果你在类上使用了MyBatis的注解 <code>@Alias(&quot;MyUser&quot;)</code>，你甚至可以自定义别名：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.sky.entity;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.type.Alias;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Alias(&quot;MyUser&quot;)</span> <span class="comment">// 自定义别名</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;MyUser&quot;</span>&gt;</span> <span class="comment">&lt;!-- 使用自定义别名 --&gt;</span></span><br><span class="line">    SELECT * FROM user WHERE id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>简单说：这条配置就是“类名简化器”，为了写XML时更省事、更清晰。</strong></p><hr><p>总结与类比</p><table><thead><tr><th align="left">配置项</th><th align="left">通俗理解</th><th align="left">好处</th></tr></thead><tbody><tr><td align="left"><strong><code>mapper-locations</code></strong></td><td align="left"><strong>告诉MyBatis“菜谱（SQL文件）在哪”</strong></td><td align="left">让MyBatis找到你写的SQL语句。</td></tr><tr><td align="left"><strong><code>type-aliases-package</code></strong></td><td align="left"><strong>告诉MyBatis“菜名（实体类）的简称”</strong></td><td align="left">在XML中不用写又长又臭的全包名，使代码更简洁。</td></tr></tbody></table><p>所以，你配置文件里的这两行：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span>   <span class="comment"># 去resources/mapper/文件夹下找所有XML文件</span></span><br><span class="line"><span class="attr">type-aliases-package:</span> <span class="string">com.sky.entity</span>       <span class="comment"># com.sky.entity包下的类，在XML里可以用短名</span></span><br></pre></td></tr></table></figure><p>请求路径示例 &#x2F;admin&#x2F;employee&#x2F;1?id&#x3D;2</p><p>将id&#x3D;2的用户的状态设置为1</p><p>同用一个update持久层接口(复用 下面编辑员工信息也要用)</p><p>动态sql中</p><p><if test=""></if></p><p>这里的 <code>test</code> 表达式中判断的 <code>name</code> 和 <code>age</code>，就是 Mapper 接口方法传入的参数</p><p>员工信息编辑</p><p>1.员工信息回显</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822164835329.png" alt="image-20250822164835329"></p><p>2.修改信息</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822165726485.png" alt="image-20250822165726485"></p><h3 id="分类管理-cv"><a href="#分类管理-cv" class="headerlink" title="分类管理(cv)"></a>分类管理(cv)</h3><p>分类有两种类型一种菜品分类另一种套餐分类</p><p>分类名称是单一的</p><p>分类可以按照分类类型查询,按名字模糊查询</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822233919154.png" alt="image-20250822233919154"></p><p>分类可以设置状态启用禁用</p><p>新增分类时候默认禁用,因为该分类下还没有菜品,不要显示在前端</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822232649533.png" alt="image-20250822232649533"></p><p>分类根据sort排序字段的数字大小排序</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250822233858919.png" alt="image-20250822233858919"></p><p>删除分类时:</p><p>菜品分类要注意是否该分类已经关联菜品,套餐分类是否关联套餐</p><p>list 根据分类类型type查询</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823092611780.png" alt="image-20250823092611780"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823092526366.png" alt="image-20250823092526366"></p><p>公共字段填充(更新信息)</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823093157026.png" alt="image-20250823093157026"></p><p>自定义注解</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823134829394.png" alt="image-20250823134829394"></p><p>定义自动填充切面</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823135139595.png" alt="image-20250823135139595"></p><p>通知</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823135401976.png" alt="image-20250823135401976"></p><p>先获取注解上的操作类型</p><p>然后获得该方法上的实体对象</p><p>根据操作类型设置对象公共字段(利用反射 先从obj获得方法对象)</p><p>然后用方法对象设置属性</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823135544349.png" alt="image-20250823135544349"></p><p>标记切入点</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823135613987.png" alt="image-20250823135613987"></p><h3 id="菜品管理"><a href="#菜品管理" class="headerlink" title="菜品管理"></a>菜品管理</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823144014710.png" alt="image-20250823144014710"></p><p>逻辑外键: 不在数据库设置物理外键, 在程序中设计 由程序员来维护表间关系</p><p>加入口味</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250823222033844.png" alt="image-20250823222033844"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250824094450142.png" alt="image-20250824094450142"></p><p>value后面用foreach遍历填值</p><p>()用逗号分隔</p><p>即insert int 表() values(),(),()….</p><p><strong>挖个坑 分类状态和菜品状态 以及套餐状态 分类启用停用会影响菜品和套餐么</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250824150031517.png" alt="image-20250824150031517"></p><p>删除菜品要考虑的事情</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250824152833218.png" alt="image-20250824152833218"></p><p>解决List<long>和List<integer>复用一个方法的问题</integer></long></p><h3 id="店铺状态管理"><a href="#店铺状态管理" class="headerlink" title="店铺状态管理"></a>店铺状态管理</h3><p>(我的理解是 营业状态是在程序允许时需要修改且管理 不需要放到数据库)</p><p>存储到redis中 key-value</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825210719646.png" alt="image-20250825210719646"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825223253361.png" alt="image-20250825223253361"></p><h3 id="实现swagger接口分类展示"><a href="#实现swagger接口分类展示" class="headerlink" title="实现swagger接口分类展示"></a>实现swagger接口分类展示</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825224011783.png" alt="image-20250825224011783"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825224035204.png" alt="image-20250825224035204"></p><h3 id="HTTPClient"><a href="#HTTPClient" class="headerlink" title="HTTPClient"></a><code>HTTPClient</code></h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825225936429.png" alt="image-20250825225936429"></p><p>java程序中发送请求的一个工具</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825230047881.png" alt="image-20250825230047881"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825230207522.png" alt="image-20250825230207522"></p><p>在前面使用aliyunOss已经引入了这个依赖</p><h4 id="发送GET请求"><a href="#发送GET请求" class="headerlink" title="发送GET请求"></a>发送GET请求</h4><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825232630894.png" alt="image-20250825232630894"></p><h4 id="发送POST请求"><a href="#发送POST请求" class="headerlink" title="发送POST请求"></a>发送POST请求</h4><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825233707508.png" alt="image-20250825233707508"></p><p>请求体用String格式的请求体,<strong>可以用简单的字符串</strong></p><p>但是手动填写很麻烦,可以用<code>fastjson</code>(<code>alibaba</code>)提供的工具来构建一个<code>json对象</code></p><p>设置一下数据格式<code>UTF-8</code> 并且设置请求体是<code>json</code></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250825233955455.png" alt="image-20250825233955455"></p><p>解析结果</p><h2 id="微信小程序端开发"><a href="#微信小程序端开发" class="headerlink" title="微信小程序端开发"></a>微信小程序端开发</h2><table><thead><tr><th>小程序<code>AppID</code></th><th>wxef2b2811faa33ce3</th></tr></thead><tbody><tr><td><code>AppSecret</code></td><td>ca051ae585dd328e4c9d2ba9c2cb8545</td></tr></tbody></table><h3 id="小程序开发代码基本结构"><a href="#小程序开发代码基本结构" class="headerlink" title="小程序开发代码基本结构"></a>小程序开发代码基本结构</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826095646578.png" alt="image-20250826095646578"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826103833877.png" alt="image-20250826103833877"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826103855959.png" alt="image-20250826103855959"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826103810515.png" alt="image-20250826103810515"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826103842124.png" alt="image-20250826103842124"></p><p>发送请求</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826104202650.png" alt="image-20250826104202650"></p><h3 id="小程序微信登录"><a href="#小程序微信登录" class="headerlink" title="小程序微信登录"></a>小程序微信登录</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826131601942.png" alt="image-20250826131601942"></p><p>在js调用<code>wx.login()</code>方法会自动返回一个授权码code(只能使用一次,使用过后就会失效)</p><p>然后在前端向服务端发送请求,携带这个code</p><p>由服务端向微信服务端发送请求(<code>appid+appsecret+code</code>)</p><p>微信服务端返回<code>openid</code>微信账号唯一标识 以及其他一些信息</p><p>openid用来查询服务端有没有该用户,没有就创建新用户存数据库,有的话直接返回user对象</p><p>服务端向小程序端返回登录信息(<code>userid openid jwt令牌</code>)</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826132001199.png" alt="image-20250826132001199"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826132939137.png" alt="image-20250826132939137"></p><p>这个登录允许之后就会获得用户名称头像,需要在此完成自动登录校验</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826133145225.png" alt="image-20250826133145225"></p><p>用户端用户模块登录接口</p><p>携带code</p><p>返回微信服务端用户唯一标识<code>openid</code> 服务端用户唯一标识 jwt登录校验令牌</p><h3 id="店铺商品浏览"><a href="#店铺商品浏览" class="headerlink" title="店铺商品浏览"></a>店铺商品浏览</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826213203087.png" alt="image-20250826213203087"></p><p>接口设计</p><p>侧边栏展示的是分类</p><p>所以查询分类GET &#x2F;user&#x2F;category&#x2F;list?type&#x3D;(1,2) 可选type</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826213414653.png" alt="image-20250826213414653"></p><p>然后右侧菜品 根据分类id查询菜品</p><p>GET &#x2F;user&#x2F;dish&#x2F;list?categoryId&#x3D;</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826213515874.png" alt="image-20250826213515874"></p><p>这里直接把菜品的口味也查了 对应数据可以在选择规格弹窗展示,如果没有口味就只显示一个加号</p><p>根据套餐分类id查询套餐</p><p>get &#x2F;user&#x2F;setmeal&#x2F;list?categoryId&#x3D;</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826214741489.png" alt="image-20250826214741489"></p><p>根据套餐id查询菜品setmeal_dish</p><p>&#x2F;user&#x2F;setmeal&#x2F;dish&#x2F;{id}</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250826214820479.png" alt="image-20250826214820479"></p><p>商品展示缓存</p><p>如果用户端频繁切换查看商品,就要频繁查询数据库,对数据库压力较大,所以可以把商品缓存起来到redis中,有改动才把缓存更新(删除,添加)</p><p><strong>例如菜品浏览</strong></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250827110849983.png" alt="image-20250827110849983"></p><p>从redis中尝试拿到缓存数据,没有才走数据库(并存放到redis)</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250827110814202.png" alt="image-20250827110814202"></p><p>删除(更新) 原则:改动哪些数据就对应更新哪个缓存</p><p>如果精准添加分类下的菜品,那么只需要更新那一个缓存</p><p>如果影响涉及多个缓存,批量删除菜品(还要根据id查cateoryId)</p><p>或者更新菜品状态(也要查categoryId)</p><p>那么可以简单清除所有缓存</p><h3 id="Spring-cache"><a href="#Spring-cache" class="headerlink" title="Spring cache"></a>Spring cache</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250827155505591.png" alt="image-20250827155505591"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250827155630902.png" alt="image-20250827155630902"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250827164445287.png" alt="image-20250827164445287"></p><p>redis key的值对应cacheNames::key</p><p>如果开了allEntries&#x3D;true则代表cacheNames层级下的所有key</p><p>茴香豆的写法 spring sp EL</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250827164718668.png" alt="image-20250827164718668"></p><p>处理缓存基于代理对象,调用方法得到返回值基于反射</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250827165035720.png" alt="image-20250827165035720"></p><p>​</p><h3 id="微信支付"><a href="#微信支付" class="headerlink" title="微信支付"></a>微信支付</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250828213101883.png" alt="image-20250828213101883"></p><p>​</p><p>小程下单生成订单号,然后点击结算申请微信支付 后端调微信支付服务接口 设置参数,(订单号,支付成功回调地址…必要参数) 返回<strong>支付交易标识(<strong>预支付,先告诉微信等下要支付了,备案) 后端对标识处理 签名加密 (传输安全) 响应给小程序,用户确认支付,直接调用微信支付服务接口 微信后台给小程序返回结果 并给</strong>用户后端回调推送支付结果</strong> 后端更新支付状态</p><p>要保证数据安全</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250829101219503.png" alt="image-20250829101219503"></p><p>进行加密解密签名,需要提供一些证书</p><p>微信后台调用商户系统需要将ip暴露出去(公网) 内网穿透</p><p>内网穿透工具:cpolar</p><p>推送支付结果之后同样需要响应 (微信持续推送,收到确认信号才会停止)</p><p>流程:</p><p>配置参数</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830162205120.png" alt="image-20250830162205120"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830161350264.png" alt="image-20250830161350264"></p><p>首先小程序申请微信支付</p><p>商户后台调用微信支付接口</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830161426472.png" alt="image-20250830161426472"></p><p>调用jsapi接口 发送请求</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830161552127.png" alt="image-20250830161552127"></p><p>对返回的预支付标识进行加密签名</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830161727263.png" alt="image-20250830161727263"></p><p>给小程序返回参数</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830161802055.png" alt="image-20250830161802055"></p><p>小程序用户确认支付,直接调用微信支付服务接口</p><p>微信支付后台调用paysuccess接口</p><p>​	<img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830162520388.png" alt="image-20250830162520388"></p><h3 id="订单历史"><a href="#订单历史" class="headerlink" title="订单历史"></a>订单历史</h3><p><strong>订单分页查询(一个订单对多个订单详细) 前后端返回数据正常,但是显示异常?</strong></p><h3 id="取消订单"><a href="#取消订单" class="headerlink" title="取消订单"></a>取消订单</h3><p>主要是业务逻辑比以前的复杂了,传来一个订单id</p><p>然后首先是把整个订单数据查询回来(一个是判断订单是否存在,另一个是判断订单状态)</p><p>订单是否存在</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830162953679.png" alt="image-20250830162953679"></p><p>订单状态: 如果订单已接单(客户取消订单需要联系商家,由商家操作)</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830163046617.png" alt="image-20250830163046617"></p><p>此外 如果未接单但已付款 就要设置支付状态为退款(并退款 这里个人不能真实接入微信支付所以只改了支付状态)</p><p>取消订单后,设置取消原因 订单状态设置为已取消 设置取消时间</p><p>最后更新订单数据</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830163238956.png" alt="image-20250830163238956"></p><h3 id="再来一单"><a href="#再来一单" class="headerlink" title="再来一单"></a>再来一单</h3><p>由于生成订单后购物车会被清空,再来一单需要把订单中的商品重新加入购物车,因此,根据订单的id可以查询出订单详细,就能知道订单中有哪些商品,这些商品就需要重新加入购物车</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250830163603238.png" alt="image-20250830163603238"></p><p>找到订单详细,之前我是实现了一个一对多的返回订单数据视图 (OrderVO)</p><p>从这里在获得详细</p><p>然后用stream流将每一个订单详细(一个订单详细就是对应一个商品 (购物车shoppingCart会被清 所以是存到订单详细))</p><p>映射成商品 然后收集变成购物车商品集合然后再批量插入</p><p>查询具体订单时,需要返回商品信息的字符串,需要拼接</p><p>​	<img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831120312195.png" alt="image-20250831120312195"></p><p>思路是遍历每一个orderVO中的订单详细 得到名称数量 拼接成字符串然后返回字符串List</p><p>再把字符串List拼接到一块 <code>String.join()</code>就可以把订单的具体商品信息拼在一起了</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831175915955.png" alt="image-20250831175915955"></p><h3 id="百度地图定位api"><a href="#百度地图定位api" class="headerlink" title="百度地图定位api"></a>百度地图定位api</h3><p>注册应用</p><p>获得ak密钥</p><p><code>AK:X5mW31CzC3gUSBLD6hTrzX4iPjAF1t9O</code></p><p>配置参数(现在商铺地址现在还没有管理 是手动配置 可以完善用实时定位)</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831181805893.png" alt="image-20250831181805893"></p><p>Get请求 通过两个请求参数 <img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831181844443.png" alt="image-20250831181844443"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831181725172.png" alt="image-20250831181725172"></p><p>构造并发送请求</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831181955895.png" alt="image-20250831181955895"></p><p>解析结果 拼接经纬度字符串 用户地址同理</p><p>调用路线规划api</p><p>构造并请求get</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831182718328.png" alt="image-20250831182718328"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831182700258.png" alt="image-20250831182700258"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831182617806.png" alt="image-20250831182617806"></p><p>解析结果</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831182744599.png" alt="image-20250831182744599"></p><p>嵌套</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831182807639.png" alt="image-20250831182807639"></p><p>从返回的json中解析出嵌套json <code>result</code></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831183418787.png" alt="image-20250831183418787"></p><p>其中取出”routes” 这是json数组 (代表路线)</p><p>取出其中第一条路线的distance</p><p>最后判断距离</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831183916190.png" alt="image-20250831183916190"></p><h3 id="SpringTask"><a href="#SpringTask" class="headerlink" title="SpringTask"></a>SpringTask</h3><p>执行定时任务的一个任务调度框架</p><p>像闹钟一样,到指定时间就触发任务</p><h4 id="cron表达式"><a href="#cron表达式" class="headerlink" title="cron表达式"></a>cron表达式</h4><p>字符串,指定触发时间</p><p>秒 分 时 日 月 星期几 年</p><p>日和星期几不同时存在,其中一个用?代替</p><p>比如2025年8月31号上午11点整</p><p>0 0 11 31 8 ? 2025</p><p>中间空格隔开</p><p>有cron表达式生成器</p><h4 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h4><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831232959186.png" alt="image-20250831232959186"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831233819164.png" alt="image-20250831233819164"></p><h3 id="定时处理的需求分析"><a href="#定时处理的需求分析" class="headerlink" title="定时处理的需求分析"></a>定时处理的需求分析</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250831234109833.png" alt="image-20250831234109833"></p><h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><p>基于TCP的一种新的网络协议</p><p>原来的http 请求响应模型</p><p>是 发送请求 返回响应 单向 短连接(连接建立在发送请求到返回响应间)</p><p>单向是只能由web端像服务端发送请求然后服务端接到请求才会返回响应数据</p><p>服务端不能主动向web端发送</p><p>websocket 双向数据传输</p><p>并且长连接(只要进行一次握手以后就可以进行双向通信)</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901143924698.png" alt="image-20250901143924698"></p><p>​</p><p>应用场景:</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901143944483.png" alt="image-20250901143944483"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901143953236.png" alt="image-20250901143953236"></p><p>示例使用步骤:</p><p>web端作为websocket客户端</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901151016427.png" alt="image-20250901151016427"></p><p>然后导入Websocket依赖</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901151104993.png" alt="image-20250901151104993"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901151358971.png" alt="image-20250901151358971"></p><p>客户端回调方法</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901151408536.png" alt="image-20250901151408536"></p><p>服务端组件</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901152610503.png" alt="image-20250901152610503"></p><p>配置类</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901153250144.png" alt="image-20250901153250144"></p><h3 id="消息提示-来单-催单"><a href="#消息提示-来单-催单" class="headerlink" title="消息提示(来单,催单)"></a>消息提示(来单,催单)</h3><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901153849210.png" alt="image-20250901153849210"></p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901155741049.png" alt="image-20250901155741049"></p><p>客户端和服务端进行websocket连接</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901170011685.png" alt="image-20250901170011685"></p><p>约定好服务端给客户端响应json格式的字符串</p><p>用map转json字符串然后再发送</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250901170102910.png" alt="image-20250901170102910"></p><p>服务端底层是调用了sendText方法 遍历会话集合里的map取出连接的session</p><h3 id="Apache-POI"><a href="#Apache-POI" class="headerlink" title="Apache POI"></a>Apache POI</h3><p>操作MS Office 常见的比如EXCEL表格</p><p>在java中对Excel表格进行读写操作</p><p>使用步骤:</p><p>导入依赖</p><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250903150515527.png" alt="image-20250903150515527"></p><h4 id="写"><a href="#写" class="headerlink" title="写"></a>写</h4><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250903150750888.png" alt="image-20250903150750888"></p><h4 id="读"><a href="#读" class="headerlink" title="读"></a>读</h4><p><img src="https://cdn.jsdelivr.net/gh/yihgyi/picgo/img/image-20250903151037785.png" alt="image-20250903151037785"></p></article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.acwing.com/media/user/profile/photo/231226_lg_3803254d73.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/09/07/JDK8%E6%96%B0%E7%89%B9%E6%80%A7/" title="JDK8新特性"><div class="cover" style="background:var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JDK8新特性</div></div></a></div><div class="next-post pull-right"><a href="/2025/09/03/%E4%BD%BF%E7%94%A8hexo-github%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/" title="使用hexo+github快速搭建自己的博客"><div class="cover" style="background:var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">使用hexo+github快速搭建自己的博客</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city" data-uid="MTAyMC82MDkwMi8zNzM3Mg=="></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.acwing.com/media/user/profile/photo/231226_lg_3803254d73.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">tzxld</div><div class="author-info__description">当朋友圈发</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/yihgyi"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/yihgyi" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/zhixiang@stu.gxnu.edu.com" target="_blank" title="Email"><i class="fa-solid fa-face-smile"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%96%E5%8D%96"><span class="toc-number">1.</span> <span class="toc-text">外卖</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">开发介绍:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">开发流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%8E%AF%E5%A2%83"><span class="toc-number">1.1.2.</span> <span class="toc-text">软件环境</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%95%B4%E4%BD%93"><span class="toc-number">1.2.</span> <span class="toc-text">项目整体:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%88%86%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91"><span class="toc-number">1.2.1.</span> <span class="toc-text">使用分模块开发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E9%98%B6%E6%AE%B5"><span class="toc-number">1.3.</span> <span class="toc-text">准备阶段:</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97"><span class="toc-number">1.3.1.</span> <span class="toc-text">登录模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F-Builder"><span class="toc-number">1.3.2.</span> <span class="toc-text">建造者模式@Builder</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.3.3.</span> <span class="toc-text">Nginx代理服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E7%AD%96%E7%95%A5"><span class="toc-number">1.3.4.</span> <span class="toc-text">负载均衡策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E5%96%84%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81"><span class="toc-number">1.3.5.</span> <span class="toc-text">完善登录验证</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Swagger"><span class="toc-number">1.3.6.</span> <span class="toc-text">Swagger</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Swagger%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.3.7.</span> <span class="toc-text">Swagger常用注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91-%E9%87%8D%E7%82%B9%E6%96%B0%E5%AD%A6%E9%83%A8%E5%88%86"><span class="toc-number">1.4.</span> <span class="toc-text">项目开发(重点新学部分)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%91%98%E5%B7%A5"><span class="toc-number">1.4.1.</span> <span class="toc-text">新增员工</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E5%A4%8D%E5%88%B6"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">对象属性复制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">测试接口</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E5%88%86%E9%A1%B5%E5%B1%95%E7%A4%BA-%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.4.2.</span> <span class="toc-text">员工分页展示(查询)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8E%E8%BF%94%E5%9B%9E%E6%97%A5%E6%9C%9F%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">对于返回日期数据格式问题解决方案</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B4%A6%E5%8F%B7%E5%90%AF%E7%94%A8%E7%A6%81%E7%94%A8%E7%8A%B6%E6%80%81"><span class="toc-number">1.4.3.</span> <span class="toc-text">账号启用禁用状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%B1%BB%E7%AE%A1%E7%90%86-cv"><span class="toc-number">1.4.4.</span> <span class="toc-text">分类管理(cv)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8F%9C%E5%93%81%E7%AE%A1%E7%90%86"><span class="toc-number">1.4.5.</span> <span class="toc-text">菜品管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%97%E9%93%BA%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">1.4.6.</span> <span class="toc-text">店铺状态管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0swagger%E6%8E%A5%E5%8F%A3%E5%88%86%E7%B1%BB%E5%B1%95%E7%A4%BA"><span class="toc-number">1.4.7.</span> <span class="toc-text">实现swagger接口分类展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTPClient"><span class="toc-number">1.4.8.</span> <span class="toc-text">HTTPClient</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81GET%E8%AF%B7%E6%B1%82"><span class="toc-number">1.4.8.1.</span> <span class="toc-text">发送GET请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%91%E9%80%81POST%E8%AF%B7%E6%B1%82"><span class="toc-number">1.4.8.2.</span> <span class="toc-text">发送POST请求</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%AB%AF%E5%BC%80%E5%8F%91"><span class="toc-number">1.5.</span> <span class="toc-text">微信小程序端开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E4%BB%A3%E7%A0%81%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">1.5.1.</span> <span class="toc-text">小程序开发代码基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95"><span class="toc-number">1.5.2.</span> <span class="toc-text">小程序微信登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%97%E9%93%BA%E5%95%86%E5%93%81%E6%B5%8F%E8%A7%88"><span class="toc-number">1.5.3.</span> <span class="toc-text">店铺商品浏览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring-cache"><span class="toc-number">1.5.4.</span> <span class="toc-text">Spring cache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98"><span class="toc-number">1.5.5.</span> <span class="toc-text">微信支付</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A2%E5%8D%95%E5%8E%86%E5%8F%B2"><span class="toc-number">1.5.6.</span> <span class="toc-text">订单历史</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E6%B6%88%E8%AE%A2%E5%8D%95"><span class="toc-number">1.5.7.</span> <span class="toc-text">取消订单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%8D%E6%9D%A5%E4%B8%80%E5%8D%95"><span class="toc-number">1.5.8.</span> <span class="toc-text">再来一单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%E5%AE%9A%E4%BD%8Dapi"><span class="toc-number">1.5.9.</span> <span class="toc-text">百度地图定位api</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringTask"><span class="toc-number">1.5.10.</span> <span class="toc-text">SpringTask</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#cron%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.5.10.1.</span> <span class="toc-text">cron表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.5.10.2.</span> <span class="toc-text">使用方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%A4%84%E7%90%86%E7%9A%84%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">1.5.11.</span> <span class="toc-text">定时处理的需求分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebSocket"><span class="toc-number">1.5.12.</span> <span class="toc-text">WebSocket</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E6%8F%90%E7%A4%BA-%E6%9D%A5%E5%8D%95-%E5%82%AC%E5%8D%95"><span class="toc-number">1.5.13.</span> <span class="toc-text">消息提示(来单,催单)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Apache-POI"><span class="toc-number">1.5.14.</span> <span class="toc-text">Apache POI</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99"><span class="toc-number">1.5.14.1.</span> <span class="toc-text">写</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%BB"><span class="toc-number">1.5.14.2.</span> <span class="toc-text">读</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/07/JDBC/" title="java连接数据库">java连接数据库</a><time datetime="2025-09-07T13:55:42.000Z" title="发表于 2025-09-07 21:55:42">2025-09-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/07/%E5%8F%8D%E5%B0%84%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" title="反射基础">反射基础</a><time datetime="2025-09-07T13:45:42.000Z" title="发表于 2025-09-07 21:45:42">2025-09-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/07/Tlias%E4%B8%AD%E5%AD%A6%E5%88%B0%E7%9A%84Spring%E6%9E%B6%E6%9E%84/" title="Tlias中学到的Spring架构">Tlias中学到的Spring架构</a><time datetime="2025-09-07T13:40:42.000Z" title="发表于 2025-09-07 21:40:42">2025-09-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/07/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2%E5%9F%BA%E7%A1%80/" title="前端三剑客">前端三剑客</a><time datetime="2025-09-07T13:35:42.000Z" title="发表于 2025-09-07 21:35:42">2025-09-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/07/IO%E6%B5%81/" title="IO流基础">IO流基础</a><time datetime="2025-09-07T13:15:42.000Z" title="发表于 2025-09-07 21:15:42">2025-09-07</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2025 By tzxld</div><div class="footer_custom_text">😄你好呀,我是翎,很高兴认识你</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><script>function loadLivere(){var e,t,o,r;"object"==typeof LivereTower?window.LivereTower.init():(e=document,t="script",r=e.getElementsByTagName(t)[0],"function"!=typeof LivereTower&&((o=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",o.async=!0,r.parentNode.insertBefore(o,r)))}function loadOtherComment(){loadLivere()}loadLivere()</script></div><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>